{% extends 'base.html' %}

{% block content %}
  <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
  <h2 class="mt-4">–ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤</h2>

  <table class="table table-striped table-bordered mt-3">
    <thead class="table-light">
      <tr>
        <th>–¢–µ—Å—Ç</th>
        <th>–î–∞—Ç–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</th>
        <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
      </tr>
    </thead>
    <tbody>
      {% for result in results %}
        <tr>
          <td>{{ result.test.title }}</td>
          <td>{{ result.completed_at|date:"d.m.Y" }}</td>
          <td>{{ result.score }} –∏–∑ {{ result.total }} ({{ result.percent }}%)</td>
          <td>
            {% if result.passed %}
              <span class="text-success">‚úÖ –°–¥–∞–Ω–æ</span>
            {% else %}
              <span class="text-danger">‚ùå –ù–µ —Å–¥–∞–Ω–æ</span>
            {% endif %}
          </td>
          <td>
            {% if result.passed %}
              <a href="{% url 'download_certificate' result.test.id %}" class="btn btn-sm btn-success">
                üéì –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
              </a>
            {% else %}
              <a href="{% url 'take_test' result.test.id %}" class="btn btn-sm btn-outline-primary">
                –ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞
              </a>
            {% endif %}
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5" class="text-center">–í—ã –µ—â–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ç–µ—Å—Ç—ã.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}